---
import Footer from "@components/Footer.astro";
import Header from "@components/Header.astro";
import pfp from "@assets/yo.jpg";
import "../styles/global.css";
import { Image } from "astro:assets";

// src/layouts/BaseLayout.astro
const { title = "M4ra" } = Astro.props;
---

<!doctype html>
<html
  lang="en"
  data-theme="forest"
  class="
  bg-gradient-to-b sm:bg-gradient-to-r
    [data-theme='forest']:from-slate-900
    [data-theme='forest']:via-slate-700
    [data-theme='forest']:to-slate-800
    sm:[data-theme='forest']:from-slate-900
    sm:[data-theme='forest']:via-slate-600
    sm:[data-theme='forest']:to-slate-900

    [data-theme='nord']:from-[#2E3440]
    [data-theme='nord']:via-[#3B4252]
    [data-theme='nord']:to-[#2E3440]
    sm:[data-theme='nord']:from-[#2E3440]
    sm:[data-theme='nord']:via-[#4C566A]
    sm:[data-theme='nord']:to-[#2E3440]
  "
  view-transition
>
  <head>
    <script is:inline>
      if (localStorage.getItem("theme") === null) {
        document.documentElement.setAttribute("data-theme", "forest");
      } else
        document.documentElement.setAttribute(
          "data-theme",
          localStorage.getItem("theme")
        );
    </script>
    <script src="https://cdn.jsdelivr.net/npm/theme-change@2.0.2/index.js"
    ></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <!-- SEO Meta Tags -->
    <meta name="description" content="A portfolio website about M4ra" />
    <meta
      name="keywords"
      content="m4ra, portfolio, project, projects, web development, developer, HTML, CSS, JavaScript, Tailwind"
    />
    <meta name="robots" content="index" />
    <meta name="author" content="M4ra" />

    <!-- FontAwesome para iconos -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <title>{title}</title>
  </head>
  <!-- Header -->
  <Header />

  <section class="md:min-h-[70vh]">
    <!-- Slot -->
    <slot />
  </section>

  <!-- Footer -->
  <Footer />
  <script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
      const button = document.getElementById("themeToggle");
      const icon = document.getElementById("themeIcon");
      if (!button || !icon) return;

      // Cambia el icono al iniciar dependiendo del tema actual
      const currentTheme = localStorage.getItem("theme");
      icon.className =
        currentTheme === "nord" ? "fa-solid fa-sun" : "fa-solid fa-moon";

      button.addEventListener("click", () => {
        const newTheme = localStorage.getItem("theme");
        icon.className =
          newTheme === "nord" ? "fa-solid fa-sun" : "fa-solid fa-moon";
      });
    });
  </script>

</html>
